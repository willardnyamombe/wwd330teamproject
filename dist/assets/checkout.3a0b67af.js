import{g as a,a as l,b as g,E as p}from"./main.6b8d29ec.js";const y=new p,c=a("total"),h=a("so-cart").length,r=a("so-cart");function f(e){return e*.06}const i=f(c);function E(e){return 10+(e-1)*2}const s=E(h);function I(e,t,n){return e+t+n}const m=I(c,i,s);document.getElementById("subtotal").innerHTML=`$${c.toFixed(2)}`;document.getElementById("tax").innerHTML=`$${i.toFixed(2)}`;document.getElementById("shipping-estimate").innerHTML="<strong><em>Please enter your zipcode to calculate shipping and order total.</em></strong>";document.getElementById("zipcode").addEventListener("keyup",()=>{document.getElementById("zipcode").checkValidity()&&(document.getElementById("shipping-estimate").innerHTML=`$${s}`,document.getElementById("order-total").innerHTML=`$${m.toFixed(2)}`)});const d=document.getElementById("checkout-form");d.addEventListener("submit",e=>{e.preventDefault(),L(d)});async function L(e){let t=new FormData(e),n={};for(const o of t.keys())n[o]=t.get(o);n.orderDate=new Date,n.orderTotal=m,n.shipping=s,n.tax=i,n.items=B(n);try{const o=await y.checkout(n);l("so-cart",[]),l("order-id",o.orderId),location.assign("/checkout/success.html")}catch(o){document.querySelectorAll(".alert").forEach(u=>document.querySelector("main").removeChild(u)),g(o.message)}}function B(e){e=[];for(let t in r)e[t]={id:r[t].Id,name:r[t].Brand.Name,price:r[t].ListPrice,quantity:1};return e}
