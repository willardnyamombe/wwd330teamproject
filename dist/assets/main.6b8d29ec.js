(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();function d(r){return JSON.parse(localStorage.getItem(r))}function f(r,t){localStorage.setItem(r,JSON.stringify(t))}function P(r){const t=window.location.search;return new URLSearchParams(t).get(r)}function h(r,t,e,n="afterbegin",o=!1){const a=e.map(r);o?t.innerHTML="":t.insertAdjacentHTML(n,a.join(""))}function i(r,t,e,n){t.insertAdjacentHTML("afterbegin",r),n&&n(e)}async function l(r){let t=await fetch(r);if(t.ok)return await t.text();throw new Error("Failed to load path.")}async function p(){let r=await l("/partials/header.html"),t=await l("/partials/footer.html"),e=document.querySelector("#header"),n=document.querySelector("#footer");i(r,e),i(t,n),y()}function y(){let r=d("so-cart"),t=document.querySelector("#cart-items-number");if(r){let e=0;for(let n in r)e+=r[n].Quantity;t.textContent=e,t.style.display="block"}else t.style.display="none"}function b(r,t=!0){const e=document.createElement("div");e.classList.add("alert"),e.innerHTML=`<p>${r}</p><span>X</span>`,e.addEventListener("click",function(o){o.target.tagName=="SPAN"&&n.removeChild(this)});const n=document.querySelector("main");n.prepend(e),t&&window.scrollTo(0,0)}const u="http://server-nodejs.cit.byui.edu:3000/",g="http://server-nodejs.cit.byui.edu:3000/checkout";let S=["tents","backpacks","hammocks","sleeping-bags"];async function c(r){const t=await r.json();if(r.ok)return t;throw{name:"servicesError",message:t}}class w{constructor(){}async checkout(t){const e={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(t)};return await fetch(g,e).then(c)}async getData(t){const e=await fetch(u+`products/search/${t}`);return(await c(e)).Result}async findProductById(t){const e=await fetch(`${u}product/${t}`);return(await c(e)).Result}async findProductBySearchString(t){let e=[];for(const n of S){let a=(await this.getData(n)).filter(s=>s.Name.toLowerCase().includes(`${t}`));for(const s of a)e.push(s)}return e}}function m(r){const{Id:t,Images:e,Name:n,ListPrice:o,NameWithoutBrand:a}=r;return`<li class="product-card">
    <a href="/product_pages/index.html?product=${t}">
      <img
        src="${e.PrimarySmall}"
        alt="Image of ${a}"
      />
      <h3 class="card__brand">${n}</h3>
      <h2 class="card__name">${a}</h2>
      <p class="product-card__price">$${o}</p></a>
  </li>`}class T{constructor(t,e,n){this.category=t,this.dataSource=e,this.listElement=n,this.url=document.URL}async init(){const t=await this.dataSource.getData(this.category);this.renderList(t),document.querySelector(".title").innerHTML=this.category[0].toUpperCase()+this.category.substring(1);const e=t.length,n=document.getElementById("quantity");n.innerHTML=`Product Category > ${e} items`,n.href=this.url}renderList(t){h(m,this.listElement,t)}filterProductList(t){var e=Math.floor(Math.random()*(t.length+1-4));return t.slice(e,e+4)}}p().then(()=>{document.forms[0].addEventListener("submit",()=>{let r=document.querySelector(".search-input").value;f("search-string",r.trim())}),window.location.href.includes("/product-listing/products-search.html")&&L()});async function L(){let r=d("search-string").toLowerCase();const t=new w,e=document.querySelector(".product-list"),n=document.querySelector(".title");let o=await t.findProductBySearchString(r);h(m,e,o),n.innerHTML=`Showing ${o.length} results for "${r}"`}export{w as E,f as a,b,P as c,d as g,T as p,y as s};
